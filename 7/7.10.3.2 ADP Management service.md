# 7.10.3.2 ADP Management service ADP管理服务
　　The ADPM allows the transport of command frames used for network maintenance.  
The list of primitives supported by the ADPM is:
- ADPM-DISCOVERY.request, ADPM-DISCOVERY.confirm
- ADPM-NETWORK-START.request, ADPM-NETWORK-START.confirm
- ADPM-NETWORK-JOIN.request, ADPM-NETWORK-JOIN.confirm, ADPMNETWORK-JOIN.indication
- ADPM-NETWORK-LEAVE.request, ADPM-NETWORK-LEAVE.indication,ADPM-NETWORK-LEAVE.confirm
- ADPM-RESET.request, ADPM-RESET.confirm
- ADPM-GET.request, ADPM-GET.confirm
- ADPM-SET.request, ADPM-SET.confirm
- ADPM-NETWORK-STATUS.indication
- ADPM-ROUTE-DISCOVERY.request, ADPM-ROUTE-DISCOVERY.confirm

## 7.10.3.2.1 ADPM-DISCOVERY.request
　　This primitive allows the upper layer to request the ADPM to scan for networks operating in its POS.

### 7.10.3.2.1.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-DISCOVERY.request {
                      Duration,
                      }
```
　　Table 26 specifies the parameters for the ADPM-DISCOVERY.request primitive.

<center>Table 26- Parameters of the ADPM-DISCOVERY.request primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Duration|Integer|0x00-0xFF|The number of seconds the active scan must last

### 7.10.3.2.1.2 When generated
　　This primitive is generated by the next upper layer to get informed of the current networks operating in the POS of the device.

### 7.10.3.2.1.3 Effect on receipt
　　On receipt of this primitive, the ADP layer will initiate an active scan by invoking the MLME-SCAN.request with the following parameters:
- ScanType = 0x01 for active scan
- ScanChannels = all bits set to 0 (not used)
- ScanDuration = Duration
- ChannelPage = 0 (not used)
- SecurityLevel = 0
- KeyIdMode, KeySource and KeyIndex: Ignored

　　On receipt of the MLME-SCAN.confirm primitive, the ADP layer issues an ADPMDISCOVERY.confirm primitive containing the PAN ID of all the PANs operating in the POS of the device, or an error code.

## 7.10.3.2.2 ADPM-DISCOVERY.confirm
　　This primitive is generated by the ADP layer upon completion of a previous ADPMDISCOVERY.request.

### 7.10.3.2.2.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-DISCOVERY.confirm {
                      Status,
                      PANCount,
                      PANDescriptor
                      }
```
　　Table 27 specifies the parameters for the ADPM-DISCOVERY.request primitive.

<center>Table 27- Parameters of the ADPM-DISCOVERY.request primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|Any status|returned by the MLME-SCAN.confirm primitive See [802.15.4-2006] for complete list of status codes and their meaning
PANCount|Integer|0x00-0xFF|The number of networks operating in the POS of the device
PANDescriptior|List of PAN descriptors|This list contains PANCount PAN descriptors as described in Table|The PAN operating in the POS of the device

　　Table 28 specifies the parameters of a PAN descriptor.

<center>Table 28 - PAN descriptor structure specification</center>

Name|Type|Valid Range|Description
----|----|----|----
ExtendedPANId|List of integers|This list contains the PAN IDs of the network found. The size of the list is PANCount. Each ExtendedPANId must be in the range 0x000000000001-0xFFFFFFFFFFFE|The list of 64-bit PAN identifiers.
PANId|List of integers|This list contains the 16-bit PAN IDs of the network found. The size of the list is PANCount, and its elements appear in the same order as the ExtendedPANId list. Each PANId must be in the range 0x0000-0xFFFF|The list of 16-bit PAN identifiers.

### 7.10.3.2.2.2 When generated
　　This primitive is generated by the ADP layer for the upper layer on completion of a ADPM-DISCOVERY.request primitive.  
　　在ADPM-DISCOVERY.request原语完成时，该原语由上层的ADP层生成。

### 7.10.3.2.2.3 Effect on receipt
　　On receipt of this primitive, the upper layer is notified of the completion of the network scan, and obtains a list of found operating networks.  
　　在接收到该原语时，向上层通知网络扫描的完成，并且获得所找到的操作网络的列表。

## 7.10.3.2.3 ADPM-NETWORK-START.request
　　This primitive allows the upper layer to request the starting of a new network. It must only be invoked by device designated as the PAN coordinator during the factory process.  
　　该原语允许上层请求开始新网络。 它只能在生产过程中被指定为PAN协调器的设备调用。

### 7.10.3.2.3.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-START.request {
                            PANId
                            }
```
　　Table specifies the parameters for the ADPM-NETWORK-START.request primitive.

<center>Table 29- Parameters of the ADPM-NETWORK-START.request primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
PANId|Integer|0x0000-0xFFFF|The PANId of the network to create, determined at the application level

### 7.10.3.2.3.2 When generated
　　This primitive is generated by the upper layer of the PAN coordinator to start a new network.  
　　该原语由PAN协调器的上层生成以开始新的网络。

### 7.10.3.2.3.3 Effect on receipt
　　On receipt of this primitive by a device which is not a PAN coordinator, it must issue an ADPM-NETWORK-START.confirm primitive with the status INVALID_REQUEST.  
　　在由不是PAN协调器的设备接收到该原语时，它必须发出具有状态INVALID_REQUEST的ADPM-NETWORK-START.confirm原语。  

　　Prior to invoking this primitive, the upper layer of the PAN coordinator should perform an ADPM-DISCOVERY.request to make sure no other network is currently operating. In case another network is operating, the upper layer may invoke the ADPM-NETWORK-START.request.  
　　在调用此原语之前，PAN协调器的上层应该执行ADPM-DISCOVERY.request以确保没有其他网络当前正在操作。 在另一网络正在操作的情况下，上层可以调用ADPM-NETWORK-START.request。  
**这里应该有笔误，有另一网络正在操作，似乎就应该上层停止调用吧！**

　　On receipt of this primitive by a device which is the PAN coordinator, and if no network has already be formed, the ADP layer must perform the steps described in clause 5.7.1 of the present document.  
　　在由作为PAN协调器的设备接收到该原语时，并且如果没有网络已经形成，则ADP层必须执行本文档的条款5.7.1中描述的步骤。  
**此处应该是由7.8.6.2来代替**

　　On receipt of the MLME-START.confirm primitive, the ADP layer must issue a ADPM-NETWORK-START.confirm primitive with the appropriate status code.  
　　在收到MLME-START.confirm原语时，ADP层必须发出一个ADPM-NETWORK-START.confirm原语，其中包含适当的状态码。

## 7.10.3.2.4 ADPM-NETWORK-START.confirm
　　This primitive reports the status of a ADPM-NETWORK-START.request.

### 7.10.3.2.4.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-START.confirm {
                          Status
                          }
```
　　Table 30 specifies the parameters for the ADPM-NETWORK-START.confirm primitive.

<center>Table 30- Parameters of the ADPM-NETWORK-START.confirm primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|SUCCESS,<br>INVALID_REQUEST,<br>STARTUP_FAILURE<br>or any status value returned from the MLME-START.confirm primitive|The result of the attempt to create the network

### 7.10.3.2.4.2 When generated
　　This primitive is generated by the ADP layer in response to an ADPM-NETWORKSTART.request primitive, and indicates if the network formation was successful or not, and an eventual reason for failure.  
　　该原语由ADP层响应于ADPM-NETWORKSTART.request原语而生成，并且指示网络形成是否成功以及失败的最终原因。  

### 7.10.3.2.4.3 Effect on receipt
　　On receipt of this primitive, the next higher layer is notified about the status of its previous ADPM-NETWORK-START.request.
　　在接收到该原语时，通知下一较高层关于其先前的ADPM-NETWORK-START.request的状态。

## 7.10.3.2.5 ADPM-NETWORK-JOIN.request
　　This primitive allows the next upper layer to join an existing network.

### 7.10.3.2.5.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-JOIN.request {
                          PANId,
                          LBAAddress
                          }
```
　　Table 31 specifies the parameters for the ADPM-NETWORK-START.confirm primitive.

<center>Table 31- Parameters of the ADPM-NETWORK-START.confirm primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
PANId|Integer|0x0000-0xFFFF|The 16-bit PAN identifier of the network to join
LBAAddress|16-bit address|0x0000-0xFFFF|The 16-bit short address of the device acting as a LoWPAN Bootstrap Agent as defined in [draft-commissioning]

### 7.10.3.2.5.2 When generated
　　The upper layer invokes this primitive when it wishes to join an existing PAN using the MAC association procedure.  
　　当上层希望使用MAC关联过程加入现有PAN时，上层调用该原语。

### 7.10.3.2.5.3 Effect on receipt
　　On receipt of this primitive by a device which is already joined, the ADP layer generates an ADPM-NETWORK-JOIN.confirm with the status INVALID_REQUEST.  
　　在由已经加入的设备接收到该原语时，ADP层生成具有状态INVALID_REQUEST的ADPM-NETWORK-JOIN.confirm。

　　On receipt of this primitive by a device which is not already joined, the ADP layer initiates the MAC association procedure (“bootstrap”) described in clause 5.5.2 of the present document.  
　　在通过尚未加入的设备接收到该原语时，ADP层发起本文档的5.5.2节中描述的MAC关联过程（“引导”）。

　　On completion, an MLME-SET.request is invoked to set the 16-bit short address of the device which was obtained during the “bootstrapping” phase. Then an ADPMNETWORK-JOIN.confirm primitive is generated with a status of SUCCESS.  
　　完成后，调用MLME-SET.request以设置在“自举”阶段期间获得的设备的16位短地址。 然后生成一个状态为SUCCESS的ADPMNETWORK-JOIN.confirm原语。

## 7.10.3.2.6 ADPM-NETWORK-JOIN.confirm
　　This primitive is generated by the ADP layer to indicate the completion status of a previous ADPM-NETWORK-JOIN.request.

### 7.10.3.2.6.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-JOIN.confirm {
                          Status,
                          NetworkAddress,
                          PANId
                          }
```
　　Table 32 specifies the parameters for the ADPM-NETWORK-JOIN.confirm primitive.

<center>Table 32- Parameters of the ADPM-NETWORK-JOIN.confirm primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|SUCCESS,<br>INVALID_REQUEST,<br>NOT_PERMITTED.|The result of the attempt to join the network
NetworkAddress|Integer|0x0001-0xFFF7 and 0xFFFF|The 16-bit network address that was allocated to the device. If the allocation fails, this address is equal to 0xFFFF.
PANId|Integer|0x0000-0xFFFF|The 16-bit address of the PAN of which the device is now a member.

### 7.10.3.2.6.2 When generated
　　This primitive is generated in response to an ADPM-NETWORK-JOIN.request
primitive, and allows the upper layer to obtain information on the status of its request.  
　　该原语是响应于ADPM-NETWORK-JOIN.request原语而生成的，并且允许上层获得关于其请求的状态的信息。  

　　The status NOT_PERMITTED is given if the device was unable to authenticate itself to the PAN coordinator.  
　　如果设备无法向PAN协调器认证自身，则会给出状态NOT_PERMITTED。

### 7.10.3.2.6.3 Effect on receipt
　　On receipt of this primitive the upper layer is informed on the status of its request.  
　　在接收到该原语时，向上层通知其请求的状态。

## 7.10.3.2.7 ADPM-NETWORK-JOIN.indication
　　This primitive allows the upper layer of the PAN coordinator to be notified when a new device has successfully completed the association procedure, and is now part of the network.  
　　当新设备已经成功地完成关联过程时，并且现在是网络的一部分,该原语允许通知PAN协调器的上层.  

### 7.10.3.2.7.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-JOIN.indication {
                            NetworkAddress,
                            ExtendedAddress,
                            CapabilityInformation,
                            }
```
　　Table 33 specifies the parameters for the ADPM-NETWORK-JOIN.indication primitive.

<center>Table 33- Parameters of the ADPM-NETWORK-JOIN.indication primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
NetworkAddress|IPv6 address|See [rfc4944]|The IPv6 network address of the device that was added to the network. This address was given during the association procedure.
ExtendedAddress|64-bit address|0x000000000001-0xFFFFFFFFFFFE|The 64-bit address of the device that was added to the network. This address is unique for any device.
CapabilityInformation|Bitmap|See Figure 56 of document [802.15.4- 2006]|The capability information field of the device

### 7.10.3.2.7.2 When generated
　　This primitive is generated by the ADP layer upon successful completion of the association of a new device.  
　　在成功完成新设备的关联后，该原语由ADP层生成。

### 7.10.3.2.7.3 Effect on receipt
　　The upper layer is notified of the completion of the association.  
　　向上层通知关联的完成。  

## 7.10.3.2.8 ADPM-NETWORK-LEAVE.request
　　This primitive allows the PAN coordinator to remove a device from the network, or allows a device to remove itself from the network.  
　　该原语允许协调器从网络中移除一个设备，或者一个设备从网络中移除自身。

### 7.10.3.2.8.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-LEAVE.request {
                            ExtendedAddress,
                            }
```
　　Table 34 specifies the parameters for the ADPM-NETWORK-LEAVE.request
primitive.

<center>Table 34- Parameters of the ADPM-NETWORK-LEAVE.request primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
ExtendedAddress|64-bit address|Any The 64-bit network address of the device to remove from the network. If NULL, the device removes itself from the network.

### 7.10.3.2.8.2 When generated
　　The next higher layer generates this primitive to leave the network, or to request another device to do so.  
　　下一个较高层生成此原语以离开网络，或请求另一个设备这样做。

### 7.10.3.2.8.3 Effect on receipt
　　On receipt of this primitive by a device which is not associated to any network, the ADP layer must issue an ADPM-NETWORK-LEAVE.confirm primitive with the status INVALID_REQUEST.

　　On receipt of this primitive by a device which is associated to any network, the following steps must be performed:
- If the device is a coordinator
  * If ExtendedAddress == NULL
    * Issue ADPM-NETWORK-LEAVE.confirm with INVALID_REQUEST
  * Else
    * If the device exists
      * Remove the device which has the address ExtendedAddress from the network using the procedure described in 5.5.2.6.1 of the present document
      * Issue ADPM-NETWORK-LEAVE.confirm with SUCCESS
    * ELSE If the device not exists
    * Issue ADPM-NETWORK-LEAVE.confirm with UNKNOWN_DEVICE
- Else (device is not a coordinator)
  * If ExtendedAddress == NULL
    * The device removes itself from the network, using the procedure described in clause 5.5.2.6.2 of the present document.
    * Issue ADPM-NETWORK-LEAVE.confirm with SUCCESS
  * Else
    * Issue ADPM-NETWORK-LEAVE.confirm with INVALID_REQUEST

## 7.10.3.2.9 ADPM-NETWORK-LEAVE.indication
　　This primitive is generated by the ADP layer to inform the upper layer that a device has been unregistered from the network.  
　　该原语由ADP层生成以通知上层，设备已经从网络注销。

### 7.10.3.2.9.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-LEAVE.indication {
                              ExtendedAddress,
                              }
```
　　Table 35 specifies the parameters for the ADPM-NETWORK-LEAVE.indication primitive.

<center>Table 35- Parameters of the ADPM-NETWORK-LEAVE.indication primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
ExtendedAddress|64-bit address|Any|The 64-bit network address of the device removed from the network.

### 7.10.3.2.9.2 When generated
　　This primitive is generated by the ADP layer of a device when it has been removed from the network by the PAN coordinator or by the ADP of the PAN coordinator when a device has decided to leave the network.  
　　当设备已经决定离开网络时，由PAN协调器或PAN协调器的ADP将其从网络中移除时，该设备的ADP层生成该原语。  

### 7.10.3.2.9.3 Effect on receipt
　　On receipt of this primitive, the upper layer of the device is notified that it is no more a part of the PAN.  
　　在接收到该原语时，设备的上层被通知其不再是PAN的一部分。

## 7.10.3.2.10 ADPM-NETWORK-LEAVE.confirm
　　This primitive allows the upper layer to be informed on the status of its previous ADPM-NETWORK-LEAVE.request. This request can be either to leave by itself the network, or to instruct another device to leave (PAN coordinator only)

### 7.10.3.2.10.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-LEAVE.confirm {
                            Status,
                            ExtendedAddress,
                            }
```
　　Table 36 specifies the parameters for the ADPM-NETWORK-LEAVE.confirm primitive.

<center>Table 36- Parameters of the ADPM-NETWORK-LEAVE.confirm primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|SUCCESS,<br>INVALID_REQUEST,<br>UNKNOWN_DEVICE<br>or any status returned by the MCPS-DATA.confirm primitive|The status of the request
ExtendedAddress|64-bit address|Any|The 64-bit network address of the device removed from the network.

### 7.10.3.2.10.2 When generated
　　This primitive is generated on completion of a device removal. If it is successful, the SUCCESS code is given. Else, an error status is given as explained in clause 5.5.2.6 of the present document.  
　　该原语在设备移除完成时生成。 如果成功，则给出SUCCESS代码。 否则，如本文件第5.5.2.6节所述，给出错误状态。

### 7.10.3.2.10.3 Effect on receipt
　　On receipt, the upper layer is notified of the result of its request.  
　　在接收时，向上层通知其请求的结果。

## 7.10.3.2.11 ADPM-RESET.request
　　This primitive allows the upper layer to request that the ADP layer performs a reset.  
　　该原语允许上层请求ADP层执行复位。

### 7.10.3.2.11.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-RESET.request {
                    }
```
　　This primitive has no parameter

### 7.10.3.2.11.2 When generated
　　This primitive allows a reset of the ADP layer, and allows resetting the NIB attributes.  
　　此原语允许复位ADP层，并允许重置NIB属性。

### 7.10.3.2.11.3 Effect on receipt
　　On receipt of this primitive, the following steps are performed:
- The ADP layer issue a MLME-RESET.request primitive with the SetDefaultPIB parameter set to TRUE, and waits for the MLME-RESET.confirm primitive  
ADP层发出MLD-RESET.request原语，并将SetDefaultPIB参数设置为TRUE，并等待MLME-RESET.confirm原语
- The ADP layer clears all of its internal variables, and flushes its routing and neighbor tables  
ADP层清除其所有内部变量，并刷新其路由表和邻居表
- The ADP layer issues an ADPM-RESET.confirm primitive with the status SUCCESS, or DISABLE_TRX_FAILURE if the MAC reset operation failed.  
ADP层发出具有状态SUCCESS的ADPM-RESET.confirm原语，或DISABLE_TRX_FAILURE的ADPM-RESET.confirm原语，如果MAC复位操作失败。

## 7.10.3.2.12 ADPM-RESET.confirm
　　This primitive allows the upper layer to be notified of the completion of an ADPMRESET.request primitive.

### 7.10.3.2.12.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-RESET.confirm {
                    Status,
                    }
```
　　Table 37 specifies the parameters for the ADPM-RESET.confirm primitive.

<center>Table 37- Parameters of the ADPM-RESET.confirm primitive</center>

Name|Type Valid|Range|Description
----|----|----|----
Status|Status|Any status value returned from the MLMERESET.confirm primitive|The status of the request

### 7.10.3.2.12.2 When generated
　　This primitive is generated by the ADP layer when a previous ADPM-RESET.request primitive has completed.  
　　当前一个ADPM-RESET.request原语完成时，该原语由ADP层生成。

### 7.10.3.2.12.3 Effect on receipt
　　The upper layer is notified of the completion of the command.  
　　向上层通知命令的完成。

## 7.10.3.2.13 ADPM-GET.request
　　This primitive allows the upper layer to get the value of an attribute from the information base.  
　　此原语允许上层从信息库中获取属性的值。

### 7.10.3.2.13.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-GET.request {
                  AttributeId,
                  AttributeIndex
                  }
```
　　Table 38 specifies the parameters for the ADPM-GET.request primitive.

<center>Table 38- Parameters of the ADPM-GET.request primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
AttributeId|Integer|See clause 5.2 of the present document|The identifier of the IB attribute to read
AttributeIndex|Integer|Depends on attribute, see clause 5.2 of the present document|The index within the table of the specified IB attribute to read. This parameter is valid only for IB attributes that are tables.

**此处的clause 5.2实际是3.2，在本记录中应该是7.8.2**

### 7.10.3.2.13.2 When generated
　　This primitive is generated by the upper layer to read the value of an attribute from the IB.  
　　该原语由上层生成以从IB读取属性的值。

### 7.10.3.2.13.3 Effect on receipt
　　On receipt of this primitive, the adaptation layer attempts to retrieve the selected attribute in the information base. If the attribute is not found, the adaptation layer generates an ADPM-GET.confirm primitive with the status UNSUPPORTED_ATTRIBUTE. If the attribute is found (and is a table), but the AttributeIndex is out of range, the adaptation layer generates an ADPM-GET.confirm primitive with the status INVALID_INDEX.  
　　在接收到该原语时，适配层尝试在信息库中检索所选择的属性。 如果未找到属性，则适配层生成具有状态UNSUPPORTED_ATTRIBUTE的ADPM-GET.confirm原语。 如果找到属性（并且是表），但AttributeIndex超出范围，则适配层生成具有状态INVALID_INDEX的ADPM-GET.confirm原语。  

　　Else, the adaptation layer generates an ADPM-GET.confirm primitive with the status SUCCESS, and the value read from the IB in the AttributeValue parameter.  
　　否则，适配层生成具有状态SUCCESS的ADPM-GET.confirm原语，以及在AttributeValue参数中从IB读取的值。

## 7.10.3.2.14 ADPM-GET.confirm
　　This primitive allows the upper layer to be informed of the status of a previously issued ADPM-GET.request primitive.  
　　该原语允许向上层通知先前发布的ADPM-GET.request原语的状态。

### 7.10.3.2.14.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-GET.confirm {
                  Status,
                  AttributeId,
                  AttributeIndex,
                  AttributeValue
                  }
```
　　Table 39 specifies the parameters for the ADPM-GET.confirm primitive.

<center>Table 39- Parameters of the ADPM-GET.confirm primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|SUCCESS,<br>UNSUPPORTED_ATTRIBUTE<br>INVALID_INDEX|The status of the reading
AttributeId|Integer|See clause 5.2 of the present document|The identifier of the IB attribute read
AttributeIndex|Integer|Depends on attribute, see clause 5.2 of the present document|The index within the table of the specified IB attribute read. This parameter is valid only for IB attributes that are tables.
AttributeValue|Various|Attribute specific|The value of the attribute read from the IB

**此处的clause 5.2实际是3.2，在本记录中应该是7.8.2**

### 7.10.3.2.14.2 When generated
　　This primitive is generated by the adaptation layer in response to an ADPMGET.request primitive.  
　　该原语由适配层响应于ASP GET.request原语而生成。

### 7.10.3.2.14.3 Effect on receipt
　　On reception of this primitive, the upper layer is informed on the status of its request, and eventually gets the desired value.  
　　在接收到该原语时，向上层通知其请求的状态，并且最终获得期望的值。

## 7.10.3.2.15 ADPM-SET.request
　　This primitive allows the upper layer to set the value of an attribute in the information base.  
　　该原语允许上层设置信息库中的属性的值。

### 7.10.3.2.15.1 Semantics of the service primitive
The semantics of this primitive are as follows:
```
ADPM-SET.request {
                  AttributeId,
                  AttributeIndex,
                  AttributeValue
                  }
```
　　Table 40 specifies the parameters for the ADPM-SET.request primitive.

<center>Table 40- Parameters of the ADPM-SET.request primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
AttributeId|Integer|See clause 5.2 of the present document|The identifier of the IB attribute to write
AttributeIndex|Integer|Depends on attribute,see clause 5.2 of the present document|The index within the table of the specified IB attribute to write. This parameter is valid only for IB attributes that are tables.
AttributeValue|Various|Depends on attribute|The value to write

**此处的clause 5.2实际是3.2，在本记录中应该是7.8.2**

### 7.10.3.2.15.2 When generated
　　This primitive is generated by the upper layer to write the value of an attribute in the IB.  
　　该原语由上层生成以写入IB中的属性的值。

### 7.10.3.2.15.3 Effect on receipt
　　On receipt of this primitive, the adaptation layer attempts to retrieve the selected attribute in the information base. If the attribute is not found, the adaptation layer generates an ADPM-SET.confirm primitive with the status UNSUPPORTED_ATTRIBUTE. If the attribute is found (and is a table), but the AttributeIndex is out of range, the adaptation layer generates an ADPM-SET.confirm primitive with the status INVALID_INDEX. If the attribute is found but is read only, the adaptation layer generates an ADPM-SET.confirm primitive with the status READ_ONLY. If the attribute is found, can be written, but the AttributeValue is out of range, the adaptation layer generates an ADPM-SET.confirm primitive with the status INVALID_PARAMETER. Else, the adaptation layer generates an ADPM-SET.confirm primitive with the status SUCCESS.  
　　在接收到该原语时，适配层尝试在信息库中检索所选择的属性。 如果未找到属性，则适配层生成具有状态UNSUPPORTED_ATTRIBUTE的ADPM-SET.confirm原语。 如果找到属性（并且是表），但是AttributeIndex超出范围，则适配层生成具有状态INVALID_INDEX的ADPM-SET.confirm原语。 如果找到属性但是是只读的，则适配层生成具有状态READ_ONLY的ADPM-SET.confirm原语。 如果找到属性，则可以写入，但是AttributeValue超出范围，适配层生成具有状态INVALID_PARAMETER的ADPM-SET.confirm原语。 否则，适配层生成具有状态SUCCESS的ADPM-SET.confirm原语。

## 7.10.3.2.16 ADPM-SET.confirm
　　This primitive allows the upper layer to be informed about a previous ADPMSET.request primitive.  
　　该原语允许向上层通知先前的ADPMSET.request原语结果。

### 7.10.3.2.16.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-SET.confirm {
                  Status,
                  AttributeId,
                  AttributeIndex
                  }
```
　　Table 41 specifies the parameters for the ADPM-SET.confirm primitive.

<center>Table 41- Parameters of the ADPM-SET.confirm primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|SUCCESS,<br>UNSUPPORTED_ATTRIBUTE,<br>READ_ONLY,<br>INVALID_PARAMETER,<br>INVALID_INDEX|The status of the writing
AttributeId|Integer|See clause 5.2 of the present document|The identifier of the IB attribute written
AttributeIndex|Integer|Depends on attribute, see clause 5.2of the present document|The index within the table of the specified IB attribute written. This parameter is valid only for IB attributes that are tables.

**此处的clause 5.2实际是3.2，在本记录中应该是7.8.2**

### 7.10.3.2.16.2 When generated
　　This primitive is generated by the adaptation layer in response to an ADPMSET.request primitive.  
　　该原语由适应层响应于ASP SET.request原语而生成。

### 7.10.3.2.16.3 Effect on receipt
　　On reception of this primitive, the upper layer is informed on the status of its request.  
　　在接收到该原语时，向上层通知其请求的状态。

## 7.10.3.2.17 ADPM-NETWORK-STATUS.indication
　　This primitive allows the next higher layer of a PAN coordinator or a coordinator to be notified when a particular event occurs on the PAN.

### 7.10.3.2.17.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-NETWORK-STATUS.indication {
                                Status,
                                AdditionalInformation
                                }
```
　　Table 42 specifies the parameters for the ADPM-NETWORK-STATUS.indication primitive.

<center>Table 42- Parameters of the ADPM-NETWORK-STATUS.indication primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|PAN_ID_CONFLICT,or any status code returned by MLME-COMM-STATUS.indication|The status or event to notify
AdditionalInformation|String|Any string|The eventual additional information to the status or event

### 7.10.3.2.17.2 When generated
　　This primitive is generated when the adaptation layer of a PAN coordinator has received a LBP message from a device on the network indicating that a PAN Id conflict is occurring. See clause 5.7.2 of the present document for complete description of the PAN ID conflict handling mechanism. In that case, this primitive is never generated by the adaptation layer of a device which is not a PAN coordinator.  
　　当PAN协调器的适配层已经从网络上的设备接收到指示PAN Id冲突正在发生的LBP消息时，生成该原语。 有关PAN ID冲突处理机制的完整描述，请参见本文档第5.7.2节。 在这种情况下，该原语从不由不是PAN协调器的设备的适配层生成。

　　This primitive is also generated if the underlying MAC layer (of a PAN coordinator or a coordinator) generates a MLME-COMM-STATUS.indication (see clause 7.3.3.7 of the present document).  
　　如果（PAN协调器或协调器的）底层MAC层生成MLME-COMM-STATUS.indication（参见本文档的第7.3.3.7节），也会生成此原语。

### 7.10.3.2.17.3 Effect on receipt
　　On reception, the upper layer of a PAN coordinator is informed that a PAN Id conflict was detected, or that a MAC event occurred.  
　　在接收时，PAN协调器的上层被通知检测到PAN Id冲突，或者发生了MAC事件。

## 7.10.3.2.18 ADPM-ROUTE-DISCOVERY.request
　　This primitive allows the upper layer to initiate a route discovery.   
　　该原语允许上层发起路由发现。

### 7.10.3.2.18.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-ROUTE-DISCOVERY.request {
                              DstAddr,
                              MaxHops
                              }
```
　　Table 43 specifies the parameters for the ADPM-ROUTE-DISCOVERY.request primitive.

<center>Table 43- Parameters of the ADPM-ROUTE-DISCOVERY.request primitive</center>

Name|Type|Valid Range|Description
DstAddr|Short address|See [rfc4944]|The Short unicast destination address of the route discovery.
MaxHops|Integer|0x00-0x07|This parameter indicates the maximum number of hops allowed for the route discovery.

### 7.10.3.2.18.2 When generated
　　This primitive is generated by the upper layer of a device to obtain a route to another device.  
　　该原语由设备的上层生成以获得到另一设备的路由。

### 7.10.3.2.18.3 Effect on receipt
　　An ADPM-ROUTE-DISCOVERY.confirm with the status INVALID_REQUEST is generated if the DstAddr is not a unicast IPv6 address, or if the MaxHops value is out of range.  
　　如果DstAddr不是单播IPv6地址，或者MaxHops值超出范围，则会生成状态为INVALID_REQUEST的ADPM-ROUTE-DISCOVERY.confirm。  

　　On receipt of this primitive, the device will initiate a route discovery procedure as described in clause 5.4.3 of the present document.  
　　在接收到该原语时，设备将发起如本文档的条款5.4.3中所描述的路由发现过程。

## 7.10.3.2.19 ADPM-ROUTE-DISCOVERY.confirm
　　This primitive allows the upper layer to be informed of the completion of a route discovery.  
　　该原语允许向上层通知路由发现的完成。

### 7.10.3.2.19.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-ROUTE-DISCOVERY.request {
                              Status
                              }
```
　　Table 44 specifies the parameters for the ADPM-NETWORK-LEAVE.confirm primitive.

<center>Table 44- Parameters of the ADPM-NETWORK-LEAVE.confirm primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|SUCCESS,<br>INVALID_REQUEST,<br>ROUTE_ERROR|The status of the route discovery


### 7.10.3.2.19.2 When generated
　　This primitive is generated by the adaptation layer on completion of a route discovery as described in clause 5.4.3 of the present document, and in [draft-load]  
　　该原语由在本文档的条款5.4.3及[draft-load]中描述的路由发现完成时的适配层生成

### 7.10.3.2.19.3 Effect on receipt
　　On reception of this primitive, the upper layer is informed on the completion of the route discovery. If the Status value is SUCCESS, the routing table has been correctly updated with a brand new route to the desired destination, and the device may begin sending frames to that destination.  
　　在接收到该原语时，向上层通知路由发现的完成。 如果状态值为SUCCESS，则路由表已正确更新，并具有到达所需目标的全新路由，并且设备可开始向该目标发送帧。

## 7.10.3.2.20 ADPM-PATH-DISCOVERY.request
　　This primitive allows the upper layer to initiate a path discovery.  
　　该原语允许上层发起路径发现。

### 7.10.3.2.20.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-PATH-DISCOVERY.request {
                            DstAddr,
                            }
```
　　Table 45 specifies the parameters for the ADPM-PATH-DISCOVERY.request primitive.

<center>Table 45- Parameters of the ADPM-PATH-DISCOVERY.request primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
DstAddr|short address|0-1199|The short unicast destination address of the path discovery.

### 7.10.3.2.20.2 When generated
　　This primitive is generated by the upper layer of a device to obtain the path to another device.  
　　该原语由设备的上层生成以获得到另一设备的路径。

### 7.10.3.2.20.3 Effect on receipt
　　An ADPM-PATH-DISCOVERY.confirm with the status INVALID_REQUEST is generated if the DstAddr is not in the routing table or after the failure of the procedure.  
　　具有状态INVALID_REQUEST的ADPM-PATH-DISCOVERY.confirm是在DstAddr不在路由表中或过程失败后生成。

　　On receipt of this primitive, the device will initiate a path discovery procedure as described in clause 5.4.4 of the present document.  
　　在接收到该原语时，设备将发起如本文档的条款5.4.4中所描述的路径发现过程。

## 7.10.3.2.21 ADPM-PATH-DISCOVERY.confirm
　　This primitive allows the upper layer to be informed of the completion of a path discovery.  
　　该原语允许向上层通知路径发现的完成。

### 7.10.3.2.21.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-ROUTE-DISCOVERY.request {
                              DstAddr,
                              NSDU
                              }
```
　　Table 44 specifies the parameters for the ADPM-NETWORK-LEAVE.confirm primitive.

<center>Table 46- Parameters of the ADPM-NETWORK-LEAVE.confirm primitive</center>
Name|Type|Valid Range|Description
DstAddr|Short address|0-1199|The Short unicast destination address of the path discovery.
Nsdu|integer|N.C|The buffer containing addresses of nodes constituting the path

### 7.10.3.2.21.2 When generated
　　This primitive is generated by the adaptation layer on completion of a path discovery as described in clause 5.4.4 of the present document.  
　　该原语由在本文档的条款5.4.4中描述的路径发现完成时的适配层生成。

**条款5.4.4对应3.5.4，在本记录中为7.8.5.4**

### 7.10.3.2.21.3 Effect on receipt
　　On reception of this primitive, the upper layer is informed on the completion of the path discovery.  
　　在接收到该原语时，向上层通知路径发现的完成。


## 7.10.3.2.22 ADPM-LBP.request
　　This primitive allows the upper layer of client to send the LBP message to server modem .

### 7.10.3.2.22.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-LBP.request {
                  DstAddrType,
                  DstAddr,
                  NsduLength,
                  Nsdu,
                  NsduType,
                  MaxHops,
                  DiscoveryRoute,
                  QualityOfService,
                  SecurityEnable
                  }
```
　　Table 44 specifies the parameters for the ADPM-LBP.request primitive.

<center>Table 47- Parameters of the ADPM-LBP.request primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
DstAddrType|Integer|0x01 - 0x02|The type of destination address contained in the DstAddr parameter. The allowed values are:<br>0x01 = 2 Bytes address (LBA address)<br>0x02 = 8 Bytes address (LBD address
DstAddr|Set of octets|-|16 bits address of LBA or 64 bits (extended address of LBD)
NsduLength|Integer|0 - 1280|The size of the NSDU, in bytes
Nsdu|Set of octets|-|The NSDU to send
NsduHandle|Integer|0x00 - 0xFF|The handle of the NSDU to transmit. This parameter is used to identify in the ADPM-LBP.confirm primitive which request is concerned. It can be randomly chosen by the application layer.
NsduType|Integer|0x00 - 0x03|The type of data contained in the NSDU.<br>0x00 = any data<br>0x01 = UDP<br>0x02 = ICMP<br>0x03 = TCP
MaxHops|Integer|0x00 - 0x07|The number of times the frame will be repeated by network routers.
DiscoveryRoute|Boolean|TRUE or FALSE|If TRUE, a route discovery procedure will be performed prior to sending the frame if a route to the destination is not available in the routing table.<br>If FALSE, no route discovery is performed.
QualityOfService|Integer|0x00 - 0x01|The required quality of service (QoS) of the frame to send.<br>Allowed values are:<br>0x00 = standard priority<br>0x01 = high priority
SecurityEnabled|Boolean|TRUE or FALSE|If TRUE, this parameter enables the ADP layer security for processing the frame.

### 7.10.3.2.22.2 When generated
　　This primitive is generated by the client LBP Server to perform the authentication, rekeying and leave procedure.  
　　该原语由客户端LBP服务器生成以执行认证，密钥和离开过程。

### 7.10.3.2.22.3 Effect on receipt
　　On reception of this primitive, the modem sends the coming frame to the destination.  
　　在接收到该原语时，调制解调器将到来的帧发送到目的地。


## 7.10.3.2.23 ADPM-LBP.confirm
　　This primitive reports the result of a previous ADPM-LBP.request primitive.

### 7.10.3.2.23.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-LBP.confirm {
                  Status,
                  NsduHandle,
                  }
```
　　Table 48 specifies the parameters for the ADPM-LBP.confirm primitive.

<center>Table 48- Parameters of the ADPM-LBP.confirm primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
Status|Status|SUCCESS,<br>INVALID_REQUEST,<br>NO_KEY,<br>BAD_CCM_OUTPUT,<br>ROUTE_ERROR,<br>BT_TABLE_FULL,<br>FRAME_NOT_BUFFERED<br>or any status values returned from security suite or the MCPS-DATA.confirm primitive|The status code of a previous ADPMLBP.request identified by its NsduHandle
NsduHandel|Integer|0x00 - 0xFF|The handle of the NSDU confirmed by this primitive

### 7.10.3.2.23.2 When generated
　　This primitive is generated in response to a ADPM-LBP.request primitive, the Status parameter indicating if the request succeeded, or the reason of failure.  
　　该原语是响应于ADPM-LBP.request原语而生成的，Status参数指示请求是否成功，或者失败的原因。
### 7.10.3.2.23.3 Effect on receipt
　　On reception of this primitive, the upper layer is notified of the status of a previous ADPM-LBP.request primitive.  
　　在接收到该原语时，向上层通知先前的ADPM-LBP.request原语的状态。


## 7.10.3.2.24 ADPM-LBP.indication
　　This primitive is used to transfer received LBP frame from the ADP layer to the upper layer.  
　　该原语用于将接收到的LBP帧从ADP层传输到上层。

### 7.10.3.2.24.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-LBP.request {
                  DstAddr,
                  SrcAddr,
                  NsduLength,
                  Nsdu,
                  NsduType,
                  LinkQualityIndicator,
                  SecurityEnabled
                  }
```
　　Table 49 specifies the parameters for the ADPM-LBP.indication primitive.

<center>Table 49- Parameters of the ADPM-LBP.indication primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
DstAddr|Integer|0x0000 - 0xFFFF|16 bits final destination address
SrcAddr|Integer 0x0000 - 0xFFFF|16 bits original source address
NsduLength|Integer|0 - 1280|The size of the NSDU, in bytes
Nsdu|Set of octets|-|The NSDU to send
NsduType|Integer|0x00-0x03|The type of data contained in the NSDU.<br>0x00 = any data<br>0x01 = UDP<br>0x02 = ICMP<br>0x03 = TCP
LinkQualityIndicator|Integer|0x00 - 0xFF|The value of the link quality during reception of the frame
SecurityEnabled|Boolean|TRUE or FALSE|If TRUE, this parameter enables the ADP layer security for processing the frame.

### 7.10.3.2.24.2 When generated
　　This primitive is generated by the ADP layer of client modem when a valid LBP frame whose final destination is the current station has been received.  
　　当已经接收到其最终目的地是当前站的有效LBP帧时，该原语由客户端调制解调器的ADP层生成。

### 7.10.3.2.24.3 Effect on receipt
　　On generation of this primitive, the upper layer is notified of the arrival of a LBP frame.  
　　在生成该原语时，向上层通知LBP帧的到达。

## 7.10.3.2.25 ADPM-BUFFER.indication
　　This primitive allows the next higher layer to be notified when the modem reach his limit capability to perform coming frame.  
　　当调制解调器达到其极限能力不能继续处理时，该原语允许通知下一较高层。

### 7.10.3.2.25.1 Semantics of the service primitive
　　The semantics of this primitive are as follows:
```
ADPM-BUFFER.indication {
                        BufferReady,
                        }
```
　　Table 50 specifies the parameters for the ADPM-BUFFER.indication primitive.

<center>Table 50- Parameters of the ADPM-BUFFER.indication primitive</center>

Name|Type|Valid Range|Description
----|----|----|----
BufferReady|Boolean|TRUE or FALSE|TRUE : modem is ready to receipt more data frame<br>FALSE : modem is not ready, stop sending data frame

### 7.10.3.2.25.2 When generated
　　This primitive is generated when the adaptation layer of a modem has reached his limit to perform more Data frame.  
　　当调制解调器的适配层已达到其极限不能处理更多数据帧时，产生此原语。

### 7.10.3.2.25.3 Effect on receipt
　　On reception, the upper layer should stop the data flow if BufferReady is equal to FALSE and open it if BufferReady is TRUE.  
　　在接收时，如果BufferReady等于FALSE，则上层应该停止数据流，并且如果BufferReady为TRUE，则打开它。
